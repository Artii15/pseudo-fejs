CREATE KEYSPACE IF NOT EXISTS Test
WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 4 };

USE Test;

-- TODO Add SASI index for users nicks
DROP TABLE IF EXISTS users;
CREATE TABLE users (
    nick varchar,
    password varchar,
    creation_time timestamp,
    PRIMARY KEY (nick, creation_time)
);

-- TODO Need to overcome the limit of 2 billion posts per author
-- TODO Set default descending order on creation_time column
-- TODO Add timeuuid
DROP TABLE IF EXISTS posts;
CREATE TABLE posts (
    author varchar,
    creation_time timestamp,
    content text,
    PRIMARY KEY(author, creation_time)
);

DROP TABLE IF EXISTS subscriptions;
CREATE TABLE subscriptions (
    subscriber varchar,
    subscribed_person varchar,
    PRIMARY KEY(subscriber, subscribed_person)
);
